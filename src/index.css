@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Montserrat&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Cormorant+Garamond&display=swap");
@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 209 40% 96%;
    --foreground: 222 47% 11%;

    --card: 210 40% 98%;
    --card-foreground: 222 47% 11%;

    --popover: 214 31% 91%;
    --popover-foreground: 222 47% 11%;

    --primary: 200 98% 39%;
    --primary-foreground: 204 100% 97%;

    --secondary: 215 24% 26%;
    --secondary-foreground: 210 40% 98%;

    --muted: 215 20% 65%;
    --muted-foreground: 222 47% 11%;

    --accent: 210 40% 98%;
    --accent-foreground: 215 19% 34%;

    --destructive: 0 72% 50%;
    --destructive-foreground: 0 85% 97%;

    --border: 212 26% 83%;
    --input: 212 26% 83%;
    --ring: 200 98% 39%;

    --radius: 0.5rem;

    /* HEARDROP Brand Colors - Japanese Streetwear Palette */
    --directions: 352 51% 45%;
    --directions-foreground: 0 0% 98%;

    --global: 180 4% 78%;
    --global-foreground: 240 14% 2%;

    --drops: 352 51% 55%;
    --drops-foreground: 0 0% 98%;

    --heardrop: 352 51% 45%;
    --heardrop-foreground: 0 0% 98%;

    /* Utility Colors */
    --logo-red: 0 100% 50%;
    --logo-red-foreground: 0 0% 98%;

    --pro-gold: 45 93% 58%;
    --pro-gold-foreground: 220 20% 8%;

    --success: 142 90% 60%;
    --warning: 45 93% 58%;
    --error: 0 84.2% 60.2%;

    /* Glassmorphism */
    --glass-bg: 220 20% 8%;
    --glass-opacity: 0.3;
    --glass-border: 0 0% 100%;
    --glass-border-opacity: 0.1;

    /* Effects */
    --neon-glow: 0 0 20px currentColor;
    --text-shadow-strong: 0 2px 8px rgba(0, 0, 0, 0.8);

    /* Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    --sidebar-background: 240 4% 10%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 200 98% 39%;
    --sidebar-primary-foreground: 204 100% 97%;
    --sidebar-accent: 215 24% 26%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 212 26% 83%;
    --sidebar-ring: 200 98% 39%;
    --sidebar: 210 40% 98%;
    --chart-1: 198 93% 59%;
    --chart-2: 213 93% 67%;
    --chart-3: 215 20% 65%;
    --chart-4: 215 16% 46%;
    --chart-5: 215 19% 34%;
    --font-sans: Montserrat, ui-sans-serif, system-ui, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    --font-serif: "Cormorant Garamond", ui-serif, Georgia, Cambria, Times New Roman, Times, serif;
    --font-mono: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);
    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    --background: 240 14% 2%;
    --foreground: 180 4% 78%;
    --card: 240 10% 6%;
    --card-foreground: 180 4% 78%;
    --popover: 240 10% 8%;
    --popover-foreground: 180 4% 78%;
    --primary: 352 51% 45%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 10% 12%;
    --secondary-foreground: 180 4% 78%;
    --muted: 206 2% 50%;
    --muted-foreground: 60 2% 63%;
    --accent: 240 10% 10%;
    --accent-foreground: 180 4% 78%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 85% 97%;
    --border: 240 5% 15%;
    --input: 240 5% 15%;
    --ring: 352 51% 45%;
    --chart-1: 199 95% 73%;
    --chart-2: 211 96% 78%;
    --chart-3: 215 20% 65%;
    --chart-4: 215 16% 46%;
    --chart-5: 215 19% 34%;
    --sidebar: 240 10% 6%;
    --sidebar-foreground: 180 4% 78%;
    --sidebar-primary: 352 51% 45%;
    --sidebar-primary-foreground: 204 80% 15%;
    --sidebar-accent: 215 20% 65%;
    --sidebar-accent-foreground: 228 84% 4%;
    --sidebar-border: 215 19% 34%;
    --sidebar-ring: 198 93% 59%;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* Glassmorphism Effect */
  .glass-effect {
    background: hsl(var(--glass-bg) / var(--glass-opacity));
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 2px solid hsl(var(--glass-border) / var(--glass-border-opacity));
  }

  .glass-card {
    background: hsl(var(--glass-bg) / 0.4);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Text Effects */
  .text-outline {
    -webkit-text-stroke: 2px currentColor;
    -webkit-text-fill-color: transparent;
    text-stroke: 2px currentColor;
    text-fill-color: transparent;
  }

  .text-shadow-strong {
    text-shadow: var(--text-shadow-strong);
  }

  .text-neon {
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
  }

  /* Background Blur Utilities */
  .bg-blur-sm {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .bg-blur-md {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .bg-blur-lg {
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
  }

  /* Hover Effects */
  .hover-glow {
    transition: var(--transition-smooth);
  }

  .hover-glow:hover {
    box-shadow: 0 0 20px currentColor;
  }

  /* Safe area for bottom navigation */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pb-safe {
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 3.5rem);
  }

  /* Touch feedback styles */
  .touch-feedback {
    @apply transition-all duration-150 ease-out;
  }

  .touch-feedback:active {
    @apply scale-95 opacity-80;
  }

  /* Touch-friendly tap targets */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Press and hold feedback */
  .press-hold {
    @apply transition-transform duration-200;
  }

  .press-hold:active {
    @apply scale-95;
    transition-duration: 50ms;
  }

  /* Smooth scrolling for touch */
  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
}

/* Global touch improvements */
button, [role="button"], a {
  -webkit-tap-highlight-color: transparent;
}

/* Swipe hint animation */
@keyframes swipe-hint {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-5px); }
}

.swipe-hint {
  animation: swipe-hint 1.5s ease-in-out infinite;
}

/* Pull indicator animation */
@keyframes pull-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(180deg); }
}

.pull-indicator {
  transition: transform 0.2s ease-out;
}

.pull-indicator.pulling {
  animation: pull-rotate 0.5s ease-out;
}

/* Map Popup Styles - Improved design without white outline */
.shop-popup-custom .mapboxgl-popup-content {
  background: hsl(var(--card));
  border-radius: 12px;
  padding: 0;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  border: none !important;
  overflow: hidden;
}

.shop-popup-custom .mapboxgl-popup-tip {
  border-top-color: hsl(var(--card));
}

.shop-popup-card {
  padding: 12px 14px;
  min-width: 240px;
}

.shop-popup-name {
  font-weight: 700;
  font-size: 14px;
  color: hsl(var(--foreground));
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.shop-popup-address {
  font-size: 11px;
  color: hsl(var(--muted-foreground));
  margin-bottom: 12px;
  line-height: 1.4;
}

.shop-popup-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}

.shop-popup-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px 6px;
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

.shop-popup-btn span {
  font-size: 10px;
}

.shop-popup-btn-brand {
  background: hsl(var(--drops) / 0.15);
  color: hsl(var(--drops));
}

.shop-popup-btn-brand:hover {
  background: hsl(var(--drops) / 0.25);
}

.shop-popup-btn-shop {
  background: hsl(var(--primary) / 0.15);
  color: hsl(var(--primary));
}

.shop-popup-btn-shop:hover {
  background: hsl(var(--primary) / 0.25);
}

.shop-popup-btn-add {
  background: hsl(var(--directions));
  color: hsl(var(--directions-foreground));
  grid-column: span 2;
}

.shop-popup-btn-add:hover {
  filter: brightness(1.1);
}

.shop-popup-btn-close {
  background: hsl(var(--muted) / 0.2);
  color: hsl(var(--muted-foreground));
  grid-column: span 2;
}

.shop-popup-btn-close:hover {
  background: hsl(var(--destructive) / 0.15);
  color: hsl(var(--destructive));
}

/* Dark mode popup styles */
.dark .shop-popup-custom .mapboxgl-popup-content {
  background: hsl(var(--card));
}

.dark .shop-popup-custom .mapboxgl-popup-tip {
  border-top-color: hsl(var(--card));
}